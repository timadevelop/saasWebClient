<nz-drawer *ngIf="userService.currentUser" [nzWidth]="tds.isMobile ? '85%' : '33%'" [nzClosable]="true"
  [nzVisible]="visible" nzPlacement="right" [nzTitle]="null" (nzOnClose)="onClose()">
  <div nz-row style="text-align: center; margin-bottom: 10px;" nzJustify="center">
    <nz-badge [nzCount]="rns.count + (userService.currentUserObs | async)?.notifications_count">
      <nz-avatar [nzSize]="128" nzIcon="user"
        [nzSrc]="(userService.currentUserObs | async)?.image || 'assets/images/undraw_user.svg'"></nz-avatar>
    </nz-badge>
  </div>
  <div nz-row style="text-align: center;">
    <h2 class="title">{{(userService.currentUserObs | async)?.first_name}}
      {{(userService.currentUserObs | async)?.last_name}}</h2>
  </div>

  <div nz-row style="text-align: center; line-height: 20px; margin-top: 5px;">
    <p *ngIf="(userService.currentUserObs | async)?.is_verified_email">
      <i nz-icon [nzType]="'check-circle'" [nzTheme]="'twotone'" [nzTwotoneColor]="'#52c41a'"
        style="font-size: 20px; margin-right: 5px;"></i>
      Verified</p>
    <p *ngIf="!(userService.currentUserObs | async)?.is_verified_email">
      <i nz-icon [nzType]="'close-circle'" [nzTheme]="'twotone'" [nzTwotoneColor]="'#eb2f96'"
        style="font-size: 20px; margin-right: 5px;"></i>
      Not Verified</p>
  </div>
  <div nz-row style="text-align: center; opacity: .7;" *ngIf="(userService.currentUserObs | async)?.bio">
    <span>{{(userService.currentUserObs | async)?.bio}}</span>
  </div>
  <div *ngIf="userService.currentUser" nz-row nzType="flex" nzJustify="center" class="main-buttons"
    style="width: 100%;">
    <a nz-col nz-button (click)="onClose()" [routerLink]="['/profiles', (userService.currentUserObs | async)?.id]"
      routerLinkActive="ant-menu-item-selected">Profile
    </a>
    <a nz-col nz-button (click)="onClose()" [routerLink]="['/messages']"
      routerLinkActive="ant-menu-item-selected">Messages</a>
    <a nz-col nz-button (click)="logout()">Logout</a>
  </div>
  <nz-divider class="margin-5" nzOrientation="left" [nzText]="'New Notifications'"></nz-divider>
  <nz-list [nzDataSource]="rns.notificationHistory" [nzItemLayout]="'horizontal'" [nzRenderItem]="notificationTemplate">
  </nz-list>
  <nz-divider class="margin-5" nzOrientation="left" [nzText]="'Prev Notifications'"></nz-divider>
  <nz-list *ngIf="paginatedNotifications" [nzDataSource]="paginatedNotifications ? paginatedNotifications?.results : []"
    [nzItemLayout]="'horizontal'" [nzRenderItem]="notificationTemplate" [nzPagination]="pagination" [nzFooter]="footer">

    <ng-template #footer>
      <!-- <div><b>ant design</b> footer part</div> -->
    </ng-template>
    <ng-template #pagination>
      <nz-pagination [nzPageIndex]="page" [nzPageSize]="pageSize" [nzTotal]="paginatedNotifications?.count"
        (nzPageIndexChange)="loadData($event)"></nz-pagination>
    </ng-template>
  </nz-list>
</nz-drawer>

<ng-template #notificationTemplate let-notification>
  <nz-list-item [nzContent]="null" [nzActions]="[]" [class.new]="!notification.notified"
    (mouseenter)="notify(notification)">
    <ng-template #typeActionTemplate>
    </ng-template>
    <!-- <ng-template #likeAction>
      <span nz-tooltip nzTitle="Posts" [routerLink]="['/profiles', user.id, 'posts']">
        <i nz-icon type="align-left" style="margin-right: 8px;"></i>{{user.posts_count}}
      </span>
    </ng-template>
    <ng-template #msgAction><i nz-icon type="message" style="margin-right: 8px;"></i> 2</ng-template> -->
    <nz-list-item-meta [nzAvatar]="'assets/images/undraw_user.svg'" [nzTitle]="nzTitle"
      [nzDescription]="descriptionTemplate">
      <ng-template #nzTitle>
        <b><a [routerLink]="[notification.redirect_url]">{{notification.title}} {{notification.id}}</a></b>
        {{notification.text}}
      </ng-template>
      <ng-template #descriptionTemplate>
        {{notification.notification_datetime | date}}
      </ng-template>
    </nz-list-item-meta>
    <ng-template #extra>
      <!-- haha -->
      <!-- <img width="272" alt="logo" src="https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png" /> -->
    </ng-template>
  </nz-list-item>
</ng-template>
