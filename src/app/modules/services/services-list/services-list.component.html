<div nz-row nzGutter="16">
  <div nz-col class="gutter-row" nzSpan="18">
    <nz-card [nzTitle]="cardtitle">
      <ng-template #cardtitle>

        <nz-breadcrumb nz-page-header-breadcrumb>
          <nz-breadcrumb-item [routerLink]="['/services']">Services</nz-breadcrumb-item>
          <nz-breadcrumb-item>{{selectedCategoryString}}</nz-breadcrumb-item>
        </nz-breadcrumb>

      </ng-template>

      <!-- <nz-divider></nz-divider> -->
      <div class="services-search-wrapper" nz-row nzJustify="space-between" nzType="flex">
        <div nz-col [nzSpan]="15">
          <form nz-form (ngSubmit)="search(searchInput.value)">
            <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton">
              <input type="text" [ngModel]="query" name="query" nz-input #searchInput placeholder="Services search" />
            </nz-input-group>
            <ng-template #suffixIconButton>
              <button nz-button nzType="primary" nzSearch><i nz-icon type="search"></i></button>
            </ng-template>
          </form>
        </div>
        <div nz-col nzSpan="7">
          <app-location-search></app-location-search>
        </div>
      </div>
      <nz-divider></nz-divider>
      <nz-list [nzDataSource]="paginatedServices ? paginatedServices.results ? paginatedServices.results : [] : []"
        [nzItemLayout]="'horizontal'" [nzRenderItem]="service" [nzPagination]="pagination" [nzFooter]="footer">
        <ng-template #footer>
          <!-- <div><b>ant design</b> footer part</div> -->
        </ng-template>
        <ng-template #pagination>
          <nz-pagination [nzPageIndex]="page" [nzPageSize]="pageSize" [nzTotal]="paginatedServices?.count"
            (nzPageIndexChange)="loadData($event)"></nz-pagination>
        </ng-template>
      </nz-list>
    </nz-card>
  </div>
  <div nz-col class="gutter-row" nzSpan="6">
    <app-services-filters-card></app-services-filters-card>
  </div>
</div>

<ng-template #service let-service>
  <nz-list-item class="service-list-item" [nzContent]="null" [nzActions]="[postedAction, priceAction]">
    <!-- Actions -->
    <ng-template #postedAction>
      <div nz-tooltip nzTitle="Добавена">
        <i nz-icon type="clock-circle" style="margin-right: 8px;"></i>{{service.created_at | date}}
      </div>
    </ng-template>
    <ng-template #priceAction>
      <div class="service-list-item-price" nz-tooltip nzTitle="Цена"><i nz-icon type="euro"
          style="margin-right: 8px;"></i>{{service.price + ' ' + service.price_currency}}</div>
    </ng-template>

    <!-- List item meta -->
    <nz-list-item-meta [nzAvatar]="avatar" [nzTitle]="nzTitle" [nzDescription]="description"
      style="align-content: stretch;">
      <!-- Templates for list item -->
      <ng-template #avatar>
        <nz-avatar [nzSize]="128" nzShape="square"
          [nzSrc]="service?.images[0] ? service.images[0].image : 'https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png'">
        </nz-avatar>
      </ng-template>
      <ng-template #description>
        <div nz-col class="list-item-description" nzType="flex" nzAlign="space-between">
          <ng-container *ngTemplateOutlet="tags"></ng-container>
          <div class="service-list-item-general-info">
            <p>{{service.description | slice:0:100 }}{{service.description.length > 100 ? '...' : ''}}</p>
          </div>
          <div>
            <span style="margin-left: 3px;"><i style="margin-right: 3px;" nz-icon nzType="global"></i>гр. София, обл.
              София</span>
          </div>
        </div>
      </ng-template>

      <ng-template #tags>
        <div class="service-tags">
          <nz-tag [routerLink]="[]" [queryParams]="{tags: tag.name}" queryParamsHandling="merge"
            *ngFor="let tag of service.tags">
            {{tag.name}}
          </nz-tag>
        </div>
      </ng-template>
      <ng-template #nzTitle>
        <h2>
          <a class="title" [routerLink]="['/services', service.id]">{{ service.title }}</a>
        </h2>
      </ng-template>
      <!--  -->
    </nz-list-item-meta>

    <!-- Extra -->
    <ng-template #extra>
      <p>Some</p>
    </ng-template>
  </nz-list-item>
</ng-template>
